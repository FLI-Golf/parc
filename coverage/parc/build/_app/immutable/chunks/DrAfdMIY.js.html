
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for parc/build/_app/immutable/chunks/DrAfdMIY.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../../../prettify.css" />
    <link rel="stylesheet" href="../../../../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../../../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../../../../index.html">All files</a> / <a href="index.html">parc/build/_app/immutable/chunks</a> DrAfdMIY.js</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>0/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>0/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>0/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>0/1</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line low'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a></td><td class="line-coverage quiet"><span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js"><span class="cstat-no" title="statement not covered" >import{w as l}from"./BDI7uxQf.js";import{p as o}from"./Bd7UX_KR.js";const m=l([]),_=l([]),g=l([]),w=l([]),M=l([]),T=l([]),k=l([]),E=l([]),u=l([]),p=l([]),y=l([]),O=l([]),S=l([]),C=l([]),v=l([]),d=l([]),R=l([]),a=l({inventory:!1,staff:!1,shifts:!1,menu:!1,menuCategories:!1,menuModifiers:!1,vendors:!1,events:!1,maintenance:!1,schedules:!1,records:!1,sections:!1,tables:!1,tableUpdates:!1,tickets:!1,ticketItems:!1,payments:!1,completedOrders:!1}),$={async getInventoryItems(){try{a.update(t=&gt;({...t,inventory:!0}));const e=await o.collection("inventory_collection").getFullList({expand:"vendor_field"});return m.set(e),e}catch(e){throw console.error("Error fetching inventory items:",e),e}finally{a.update(e=&gt;({...e,inventory:!1}))}},async createInventoryItem(e){try{const t=await o.collection("inventory_collection").create(e);return m.update(r=&gt;[...r,t]),t}catch(t){throw console.error("Error creating inventory item:",t),t}},async updateInventoryItem(e,t){try{const r=await o.collection("inventory_collection").update(e,t);return m.update(n=&gt;n.map(c=&gt;c.id===e?r:c)),r}catch(r){throw console.error("Error updating inventory item:",r),r}},async deleteInventoryItem(e){try{await o.collection("inventory_collection").delete(e),m.update(t=&gt;t.filter(r=&gt;r.id!==e))}catch(t){throw console.error("Error deleting inventory item:",t),t}},async getStaff(){try{a.update(t=&gt;({...t,staff:!0}));const e=await o.collection("staff_collection").getFullList({expand:"user_id"});return _.set(e),e}catch(e){throw console.error("Error fetching staff:",e),e}finally{a.update(e=&gt;({...e,staff:!1}))}},async createStaff(e){try{const t=await o.collection("staff_collection").create(e);return _.update(r=&gt;[...r,t]),t}catch(t){throw console.error("Error creating staff:",t),t}},async updateStaff(e,t){try{const r=await o.collection("staff_collection").update(e,t);return _.update(n=&gt;n.map(c=&gt;c.id===e?r:c)),r}catch(r){throw console.error("Error updating staff:",r),r}},async deleteStaff(e){try{await o.collection("staff_collection").delete(e),_.update(t=&gt;t.filter(r=&gt;r.id!==e))}catch(t){throw console.error("Error deleting staff:",t),t}},async getShifts(){try{a.update(t=&gt;({...t,shifts:!0}));const e=await o.collection("shifts_collection").getFullList({expand:"staff_member,assigned_section"});return g.set(e),e}catch(e){throw console.error("Error fetching shifts:",e),e}finally{a.update(e=&gt;({...e,shifts:!1}))}},async createShift(e){try{const t=await o.collection("shifts_collection").create(e),r=await o.collection("shifts_collection").getOne(t.id,{expand:"staff_member,assigned_section"});return g.update(n=&gt;[...n,r]),r}catch(t){throw console.error("Error creating shift:",t),t}},async updateShift(e,t){try{console.log("updateShift called with:",{id:e,data:t});const r=await o.collection("shifts_collection").update(e,t);console.log("Update response:",r);const n=await o.collection("shifts_collection").getOne(e,{expand:"staff_member,assigned_section"});return console.log("Expanded record:",n),g.update(c=&gt;c.map(i=&gt;i.id===e?n:i)),n}catch(r){throw console.error("Error updating shift:",r),r}},async deleteShift(e){try{await o.collection("shifts_collection").delete(e),g.update(t=&gt;t.filter(r=&gt;r.id!==e))}catch(t){throw console.error("Error deleting shift:",t),t}},async getMenuItems(){try{a.update(t=&gt;({...t,menu:!0}));const e=await o.collection("menu_collection").getFullList();return w.set(e),e}catch(e){throw console.error("Error fetching menu items:",e),e}finally{a.update(e=&gt;({...e,menu:!1}))}},async createMenuItem(e){try{const t=await o.collection("menu_collection").create(e);return w.update(r=&gt;[...r,t]),t}catch(t){throw console.error("Error creating menu item:",t),t}},async updateMenuItem(e,t){try{const r=await o.collection("menu_collection").update(e,t);return w.update(n=&gt;n.map(c=&gt;c.id===e?r:c)),r}catch(r){throw console.error("Error updating menu item:",r),r}},async deleteMenuItem(e){try{await o.collection("menu_collection").delete(e),w.update(t=&gt;t.filter(r=&gt;r.id!==e))}catch(t){throw console.error("Error deleting menu item:",t),t}},async getMenuCategories(){try{a.update(t=&gt;({...t,menuCategories:!0}));const e=await o.collection("menu_categories").getFullList({sort:"+sort_order"});return M.set(e),e}catch(e){return console.error("Error fetching menu categories:",e),M.set([]),[]}finally{a.update(e=&gt;({...e,menuCategories:!1}))}},async createMenuCategory(e){try{const t=await o.collection("menu_categories").create(e);return M.update(r=&gt;[...r,t]),t}catch(t){throw console.error("Error creating menu category:",t),t}},async getMenuModifiers(){try{a.update(t=&gt;({...t,menuModifiers:!0}));const e=await o.collection("menu_modifiers").getFullList({sort:"+sort_order"});return T.set(e),e}catch(e){return console.error("Error fetching menu modifiers:",e),T.set([]),[]}finally{a.update(e=&gt;({...e,menuModifiers:!1}))}},async createMenuModifier(e){try{const t=await o.collection("menu_modifiers").create(e);return T.update(r=&gt;[...r,t]),t}catch(t){throw console.error("Error creating menu modifier:",t),t}},async getVendors(){try{a.update(t=&gt;({...t,vendors:!0}));const e=await o.collection("vendors_collection").getFullList();return k.set(e),e}catch(e){throw console.error("Error fetching vendors:",e),e}finally{a.update(e=&gt;({...e,vendors:!1}))}},async createVendor(e){try{const t=await o.collection("vendors_collection").create(e);return k.update(r=&gt;[...r,t]),t}catch(t){throw console.error("Error creating vendor:",t),t}},async updateVendor(e,t){try{const r=await o.collection("vendors_collection").update(e,t);return k.update(n=&gt;n.map(c=&gt;c.id===e?r:c)),r}catch(r){throw console.error("Error updating vendor:",r),r}},async deleteVendor(e){try{await o.collection("vendors_collection").delete(e),k.update(t=&gt;t.filter(r=&gt;r.id!==e))}catch(t){throw console.error("Error deleting vendor:",t),t}},async getEvents(){try{a.update(t=&gt;({...t,events:!0}));const e=await o.collection("events_collection").getFullList();return E.set(e),e}catch(e){throw console.error("Error fetching events:",e),e}finally{a.update(e=&gt;({...e,events:!1}))}},async createEvent(e){try{const t=await o.collection("events_collection").create(e);return E.update(r=&gt;[...r,t]),t}catch(t){throw console.error("Error creating event:",t),t}},async updateEvent(e,t){try{const r=await o.collection("events_collection").update(e,t);return E.update(n=&gt;n.map(c=&gt;c.id===e?r:c)),r}catch(r){throw console.error("Error updating event:",r),r}},async deleteEvent(e){try{await o.collection("events_collection").delete(e),E.update(t=&gt;t.filter(r=&gt;r.id!==e))}catch(t){throw console.error("Error deleting event:",t),t}},async getMaintenanceTasks(){try{a.update(t=&gt;({...t,maintenance:!0}));let e="maintenance_tasks";try{const t=await o.collection(e).getFullList();return u.set(t),t}catch{try{e="maintenance_tasks_collection";const r=await o.collection(e).getFullList();return u.set(r),r}catch{return console.log("Maintenance tasks collection not found, using empty array"),u.set([]),[]}}}catch(e){return console.error("Error fetching maintenance tasks:",e),u.set([]),[]}finally{a.update(e=&gt;({...e,maintenance:!1}))}},async createMaintenanceTask(e){try{const t=await o.collection("maintenance_tasks").create(e);return u.update(r=&gt;[...r,t]),t}catch(t){throw console.error("Error creating maintenance task:",t),t}},async updateMaintenanceTask(e,t){try{const r=await o.collection("maintenance_tasks").update(e,t);return u.update(n=&gt;n.map(c=&gt;c.id===e?r:c)),r}catch(r){throw console.error("Error updating maintenance task:",r),r}},async deleteMaintenanceTask(e){try{await o.collection("maintenance_tasks").delete(e),u.update(t=&gt;t.filter(r=&gt;r.id!==e))}catch(t){throw console.error("Error deleting maintenance task:",t),t}},async getMaintenanceSchedules(){try{a.update(t=&gt;({...t,schedules:!0}));let e="maintenance_schedules";try{const t=await o.collection(e).getFullList();return p.set(t),t}catch{try{e="maintenance_schedules_collection";const r=await o.collection(e).getFullList();return p.set(r),r}catch{return console.log("Maintenance schedules collection not found, using empty array"),p.set([]),[]}}}catch(e){return console.error("Error fetching maintenance schedules:",e),p.set([]),[]}finally{a.update(e=&gt;({...e,schedules:!1}))}},async createMaintenanceSchedule(e){try{const t=await o.collection("maintenance_schedules").create(e);return p.update(r=&gt;[...r,t]),t}catch(t){throw console.error("Error creating maintenance schedule:",t),t}},async updateMaintenanceSchedule(e,t){try{const r=await o.collection("maintenance_schedules").update(e,t);return p.update(n=&gt;n.map(c=&gt;c.id===e?r:c)),r}catch(r){throw console.error("Error updating maintenance schedule:",r),r}},async deleteMaintenanceSchedule(e){try{await o.collection("maintenance_schedules").delete(e),p.update(t=&gt;t.filter(r=&gt;r.id!==e))}catch(t){throw console.error("Error deleting maintenance schedule:",t),t}},async getMaintenanceRecords(){try{a.update(t=&gt;({...t,records:!0}));let e="maintenance_records";try{const t=await o.collection(e).getFullList();return y.set(t),t}catch{try{e="maintenance_records_collection";const r=await o.collection(e).getFullList();return y.set(r),r}catch{return console.log("Maintenance records collection not found, using empty array"),y.set([]),[]}}}catch(e){return console.error("Error fetching maintenance records:",e),y.set([]),[]}finally{a.update(e=&gt;({...e,records:!1}))}},async createMaintenanceRecord(e){try{const t=await o.collection("maintenance_records").create(e);return y.update(r=&gt;[...r,t]),t}catch(t){throw console.error("Error creating maintenance record:",t),t}},async updateTicketItem(e,t){try{const r=await o.collection("ticket_items_collection").update(e,t);return d.update(n=&gt;n.map(c=&gt;c.id===e?r:c)),r}catch(r){throw console.error("Error updating ticket item:",r),r}},async getSections(){try{a.update(t=&gt;({...t,sections:!0})),console.log("Attempting to fetch sections...");let e;try{e=await o.collection("sections_collection").getFullList(),console.log("Found sections_collection:",e)}catch(t){console.log("sections_collection not found, trying sections:",t.message);try{e=await o.collection("sections").getFullList(),console.log("Found sections:",e)}catch(r){throw console.log("sections not found either:",r.message),r}}return O.set(e),console.log("Sections loaded into store:",e.length),e}catch(e){throw console.error("Error fetching sections:",e),e}finally{a.update(e=&gt;({...e,sections:!1}))}},async createSection(e){try{const t=await o.collection("sections_collection").create(e);return O.update(r=&gt;[...r,t]),t}catch(t){throw console.error("Error creating section:",t),t}},async getTables(){try{a.update(t=&gt;({...t,tables:!0}));const e=await o.collection("tables_collection").getFullList();return S.set(e),e}catch(e){throw console.error("Error fetching tables:",e),e}finally{a.update(e=&gt;({...e,tables:!1}))}},async createTable(e){try{const t=await o.collection("tables_collection").create(e);return S.update(r=&gt;[...r,t]),t}catch(t){throw console.error("Error creating table:",t),t}},async updateTable(e,t){try{const r=await o.collection("tables_collection").update(e,t);return S.update(n=&gt;n.map(c=&gt;c.id===e?r:c)),r}catch(r){throw console.error("Error updating table:",r),r}},async getTableUpdates(){try{a.update(t=&gt;({...t,tableUpdates:!0}));const e=await o.collection("table_updates_collection").getFullList({sort:"-created"});return C.set(e),e}catch(e){throw console.error("Error fetching table updates:",e),e}finally{a.update(e=&gt;({...e,tableUpdates:!1}))}},async createTableUpdate(e){try{const t=await o.collection("table_updates_collection").create(e);return C.update(r=&gt;[t,...r]),t}catch(t){throw console.error("Error creating table update:",t),t}},async getTickets(){try{a.update(t=&gt;({...t,tickets:!0}));const e=await o.collection("tickets_collection").getFullList({expand:"table_id,server_id",sort:"-created"});return v.set(e),e}catch(e){return console.error("Error fetching tickets:",e),v.set([]),[]}finally{a.update(e=&gt;({...e,tickets:!1}))}},async createTicket(e){try{const t=`T${Date.now().toString().slice(-6)}`,r={...e,ticket_number:t,status:"open",subtotal_amount:0,tax_amount:0,tip_amount:0,total_amount:0},n=await o.collection("tickets_collection").create(r,{expand:"table_id,server_id"});return v.update(c=&gt;[n,...c]),n}catch(t){throw console.error("Error creating ticket:",t),t}},async updateTicket(e,t){try{const r=await o.collection("tickets_collection").update(e,t,{expand:"table_id,server_id"});return v.update(n=&gt;n.map(c=&gt;c.id===e?r:c)),r}catch(r){throw console.error("Error updating ticket:",r),r}},async getTicketItems(e=null){try{a.update(n=&gt;({...n,ticketItems:!0}));const t=e?`ticket_id="${e}"`:"",r=await o.collection("ticket_items_collection").getFullList({expand:"ticket_id,menu_item_id",filter:t,sort:"created"});return d.set(r),r}catch(t){return console.error("Error fetching ticket items:",t),d.set([]),[]}finally{a.update(t=&gt;({...t,ticketItems:!1}))}},async addTicketItem(e){try{const t={ticket_id:e.ticket_id,menu_item_id:e.menu_item_id,quantity:e.quantity,unit_price:e.unit_price,total_price:e.total_price,modifications:e.modifications,course:e.course,kitchen_station:e.kitchen_station,status:"ordered",ordered_at:new Date().toISOString()},r=await o.collection("ticket_items_collection").create(t,{expand:"ticket_id,menu_item_id"});return d.update(n=&gt;[r,...n]),await this.recalculateTicketTotals(e.ticket_id),r}catch(t){throw console.error("Error adding ticket item:",t),t}},async updateTicketItem(e,t){try{const r=await o.collection("ticket_items_collection").update(e,t,{expand:"ticket_id,menu_item_id"});return d.update(n=&gt;n.map(c=&gt;c.id===e?r:c)),r}catch(r){throw console.error("Error updating ticket item:",r),r}},async removeTicketItem(e){try{let t=null,r=null;try{t=await o.collection("ticket_items_collection").getOne(e),r=t.ticket_id}catch(n){console.warn("Item not found in ticket_items_collection, trying ticket_items:",n);try{t=await o.collection("ticket_items").getOne(e),r=t.ticket_id}catch(c){console.error("Item not found in either collection:",c),d.update(i=&gt;i.filter(h=&gt;h.id!==e));return}}try{t&amp;&amp;await o.collection("ticket_items_collection").delete(e)}catch(n){console.warn("Failed to delete from ticket_items_collection, trying ticket_items:",n);try{await o.collection("ticket_items").delete(e)}catch(c){console.error("Failed to delete from both collections:",c)}}d.update(n=&gt;n.filter(c=&gt;c.id!==e)),r&amp;&amp;await this.recalculateTicketTotals(r)}catch(t){console.error("Error removing ticket item:",t),d.update(r=&gt;r.filter(n=&gt;n.id!==e))}},async recalculateTicketTotals(e){try{const r=(await o.collection("ticket_items_collection").getFullList({filter:`ticket_id="${e}"`})).reduce((h,b)=&gt;h+(b.total_price||0),0),c=r*.09,i=r+c;return await this.updateTicket(e,{subtotal_amount:r,tax_amount:c,total_amount:i})}catch(t){throw console.error("Error recalculating ticket totals:",t),t}},async getCompletedOrders(){try{a.update(t=&gt;({...t,completedOrders:!0}));const e=await o.collection("completed_orders").getFullList({sort:"-completed_at",expand:"table_id,server_id"});return R.set(e),e}catch(e){throw console.error("Error fetching completed orders:",e),e}finally{a.update(e=&gt;({...e,completedOrders:!1}))}},async createCompletedOrder(e){try{const t=await o.collection("completed_orders").create(e);return R.update(r=&gt;[t,...r]),t}catch(t){throw console.error("Error creating completed order:",t),t}},async createPayment(e){try{const t=await o.collection("payments").create(e);return console.log("Payment record created:",t),t}catch(t){throw console.error("Error creating payment record:",t),t}},async createSpoil({ticketItemId:e,ticketId:t,menuItemId:r,userId:n,staffId:c=null,quantity:i=1,spoilType:h="returned",source:b="bar",status:U="open",reasonText:L="",costEstimate:x=null,occurredAt:I=null,metadata:f=null,audioBlob:F=null}){try{const s=new FormData;if(s.append("ticket_item_id",e),t&amp;&amp;s.append("ticket_id",t),r&amp;&amp;s.append("menu_item_id",r),n&amp;&amp;s.append("user_id",n),c&amp;&amp;s.append("staff_id",c),s.append("quantity_field",String(i)),s.append("spoil_type",h),s.append("source",b),s.append("status",U),L&amp;&amp;s.append("reason_text",L),x!=null&amp;&amp;s.append("cost_estimate",String(x)),I&amp;&amp;s.append("occurred_at",I),f&amp;&amp;s.append("metadata",typeof f=="string"?f:JSON.stringify(f)),F){const D=new File([F],"spoil-reason.webm",{type:F.type||"audio/webm"});s.append("attachments",D)}return await o.collection("spoils").create(s)}catch(s){throw console.error("Error creating spoil record:",s),s}}};export{S as a,O as b,$ as c,v as d,E as e,_ as f,u as g,p as h,m as i,y as j,C as k,a as l,w as m,g as s,d as t,k as v};<span class="fstat-no" title="function not covered" ><span class="branch-0 cbranch-no" title="branch not covered" ></span></span></span>
&nbsp;</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2025-08-17T17:24:04.565Z
            </div>
        <script src="../../../../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../../../../sorter.js"></script>
        <script src="../../../../../block-navigation.js"></script>
    </body>
</html>
    